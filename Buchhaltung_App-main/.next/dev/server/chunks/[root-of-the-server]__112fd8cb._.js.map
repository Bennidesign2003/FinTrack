{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Buchhaltung_App/Buchhaltung_App-main/db/schema.ts"],"sourcesContent":["import { sqliteTable, text, real, integer, sqliteView } from 'drizzle-orm/sqlite-core'\nimport { sql } from 'drizzle-orm'\n\nexport const invoices = sqliteTable('invoices', {\n  id: integer('id').primaryKey({ autoIncrement: true }),\n  customer: text('customer').notNull(),\n  title: text('title').notNull().default(''),\n  amount: real('amount').notNull(),\n  taxRate: real('tax_rate').notNull().default(19),\n  taxAmount: real('tax_amount').notNull().default(0),\n  totalAmount: real('total_amount').notNull(),\n  dueDate: text('due_date'),\n  description: text('description'),\n  createdAt: text('created_at')\n    .default(sql`CURRENT_TIMESTAMP`)\n    .notNull(),\n  updatedAt: text('updated_at')\n    .default(sql`CURRENT_TIMESTAMP`)\n    .notNull(),\n  status: text('status').default('open').notNull() // 'open', 'paid', 'overdue'\n})\n\nexport const expenses = sqliteTable('expenses', {\n  id: integer('id').primaryKey({ autoIncrement: true }),\n  category: text('category').notNull(),\n  amount: real('amount').notNull(),\n  date: text('date'),\n  description: text('description'),\n  createdAt: text('created_at')\n    .default(sql`CURRENT_TIMESTAMP`)\n    .notNull()\n})\n\nexport const customers = sqliteTable('customers', {\n  id: integer('id').primaryKey({ autoIncrement: true }),\n  name: text('name').notNull().unique(),\n  email: text('email'),\n  phone: text('phone'),\n  address: text('address'),\n  city: text('city'),\n  postalCode: text('postal_code'),\n  country: text('country'),\n  taxId: text('tax_id'),\n  notes: text('notes'),\n  createdAt: text('created_at')\n    .default(sql`CURRENT_TIMESTAMP`)\n    .notNull(),\n  updatedAt: text('updated_at')\n    .default(sql`CURRENT_TIMESTAMP`)\n    .notNull()\n})\n\nexport const suppliers = sqliteTable('suppliers', {\n  id: integer('id').primaryKey({ autoIncrement: true }),\n  name: text('name').notNull().unique(),\n  email: text('email'),\n  phone: text('phone'),\n  address: text('address'),\n  city: text('city'),\n  postalCode: text('postal_code'),\n  country: text('country'),\n  taxId: text('tax_id'),\n  notes: text('notes'),\n  createdAt: text('created_at')\n    .default(sql`CURRENT_TIMESTAMP`)\n    .notNull(),\n  updatedAt: text('updated_at')\n    .default(sql`CURRENT_TIMESTAMP`)\n    .notNull()\n})\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;;;;;;AAEO,MAAM,WAAW,IAAA,+KAAW,EAAC,YAAY;IAC9C,IAAI,IAAA,2KAAO,EAAC,MAAM,UAAU,CAAC;QAAE,eAAe;IAAK;IACnD,UAAU,IAAA,wKAAI,EAAC,YAAY,OAAO;IAClC,OAAO,IAAA,wKAAI,EAAC,SAAS,OAAO,GAAG,OAAO,CAAC;IACvC,QAAQ,IAAA,wKAAI,EAAC,UAAU,OAAO;IAC9B,SAAS,IAAA,wKAAI,EAAC,YAAY,OAAO,GAAG,OAAO,CAAC;IAC5C,WAAW,IAAA,wKAAI,EAAC,cAAc,OAAO,GAAG,OAAO,CAAC;IAChD,aAAa,IAAA,wKAAI,EAAC,gBAAgB,OAAO;IACzC,SAAS,IAAA,wKAAI,EAAC;IACd,aAAa,IAAA,wKAAI,EAAC;IAClB,WAAW,IAAA,wKAAI,EAAC,cACb,OAAO,CAAC,mIAAG,CAAC,iBAAiB,CAAC,EAC9B,OAAO;IACV,WAAW,IAAA,wKAAI,EAAC,cACb,OAAO,CAAC,mIAAG,CAAC,iBAAiB,CAAC,EAC9B,OAAO;IACV,QAAQ,IAAA,wKAAI,EAAC,UAAU,OAAO,CAAC,QAAQ,OAAO,GAAG,4BAA4B;AAC/E;AAEO,MAAM,WAAW,IAAA,+KAAW,EAAC,YAAY;IAC9C,IAAI,IAAA,2KAAO,EAAC,MAAM,UAAU,CAAC;QAAE,eAAe;IAAK;IACnD,UAAU,IAAA,wKAAI,EAAC,YAAY,OAAO;IAClC,QAAQ,IAAA,wKAAI,EAAC,UAAU,OAAO;IAC9B,MAAM,IAAA,wKAAI,EAAC;IACX,aAAa,IAAA,wKAAI,EAAC;IAClB,WAAW,IAAA,wKAAI,EAAC,cACb,OAAO,CAAC,mIAAG,CAAC,iBAAiB,CAAC,EAC9B,OAAO;AACZ;AAEO,MAAM,YAAY,IAAA,+KAAW,EAAC,aAAa;IAChD,IAAI,IAAA,2KAAO,EAAC,MAAM,UAAU,CAAC;QAAE,eAAe;IAAK;IACnD,MAAM,IAAA,wKAAI,EAAC,QAAQ,OAAO,GAAG,MAAM;IACnC,OAAO,IAAA,wKAAI,EAAC;IACZ,OAAO,IAAA,wKAAI,EAAC;IACZ,SAAS,IAAA,wKAAI,EAAC;IACd,MAAM,IAAA,wKAAI,EAAC;IACX,YAAY,IAAA,wKAAI,EAAC;IACjB,SAAS,IAAA,wKAAI,EAAC;IACd,OAAO,IAAA,wKAAI,EAAC;IACZ,OAAO,IAAA,wKAAI,EAAC;IACZ,WAAW,IAAA,wKAAI,EAAC,cACb,OAAO,CAAC,mIAAG,CAAC,iBAAiB,CAAC,EAC9B,OAAO;IACV,WAAW,IAAA,wKAAI,EAAC,cACb,OAAO,CAAC,mIAAG,CAAC,iBAAiB,CAAC,EAC9B,OAAO;AACZ;AAEO,MAAM,YAAY,IAAA,+KAAW,EAAC,aAAa;IAChD,IAAI,IAAA,2KAAO,EAAC,MAAM,UAAU,CAAC;QAAE,eAAe;IAAK;IACnD,MAAM,IAAA,wKAAI,EAAC,QAAQ,OAAO,GAAG,MAAM;IACnC,OAAO,IAAA,wKAAI,EAAC;IACZ,OAAO,IAAA,wKAAI,EAAC;IACZ,SAAS,IAAA,wKAAI,EAAC;IACd,MAAM,IAAA,wKAAI,EAAC;IACX,YAAY,IAAA,wKAAI,EAAC;IACjB,SAAS,IAAA,wKAAI,EAAC;IACd,OAAO,IAAA,wKAAI,EAAC;IACZ,OAAO,IAAA,wKAAI,EAAC;IACZ,WAAW,IAAA,wKAAI,EAAC,cACb,OAAO,CAAC,mIAAG,CAAC,iBAAiB,CAAC,EAC9B,OAAO;IACV,WAAW,IAAA,wKAAI,EAAC,cACb,OAAO,CAAC,mIAAG,CAAC,iBAAiB,CAAC,EAC9B,OAAO;AACZ"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Buchhaltung_App/Buchhaltung_App-main/db/index.ts"],"sourcesContent":["import Database from 'better-sqlite3'\nimport { drizzle } from 'drizzle-orm/better-sqlite3'\nimport * as schema from './schema'\n\nconst sqlite = new Database('buchhaltung.db')\nexport const db = drizzle(sqlite, { schema })\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;AAEA,MAAM,SAAS,IAAI,sIAAQ,CAAC;AACrB,MAAM,KAAK,IAAA,iLAAO,EAAC,QAAQ;IAAE,QAAA;AAAO"}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Buchhaltung_App/Buchhaltung_App-main/pages/api/expenses-trend.ts"],"sourcesContent":["import type { NextApiRequest, NextApiResponse } from 'next'\nimport { db } from '@/db'\nimport { expenses } from '@/db/schema'\nimport { sql } from 'drizzle-orm'\n\nexport default async function handler(req: NextApiRequest, res: NextApiResponse) {\n  try {\n    // get grouped sums per month from expenses\n    const rows: any = await db\n      .select({ month: sql`strftime('%Y-%m', ${expenses.createdAt})`, total: sql`COALESCE(SUM(${expenses.amount}),0)` })\n      .from(expenses)\n      .groupBy(sql`strftime('%Y-%m', ${expenses.createdAt})`)\n      .all()\n\n    // build last 12 months array (including current)\n    const months: string[] = []\n    const now = new Date()\n    for (let i = 11; i >= 0; i--) {\n      const d = new Date(now.getFullYear(), now.getMonth() - i, 1)\n      const ym = d.toISOString().slice(0, 7) // YYYY-MM\n      months.push(ym)\n    }\n\n    const map: Record<string, number> = {}\n    rows.forEach((r: any) => {\n      if (r && r.month) map[r.month] = Number(r.total ?? 0)\n    })\n\n    const totals = months.map(m => map[m] ?? 0)\n\n    return res.status(200).json({ months, totals })\n  } catch (error) {\n    console.error('Error fetching expenses series:', error)\n    return res.status(500).json({ error: 'Fehler beim Abrufen der Ausgabedaten', details: String(error) })\n  }\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;;;;;;;;AAEe,eAAe,QAAQ,GAAmB,EAAE,GAAoB;IAC7E,IAAI;QACF,2CAA2C;QAC3C,MAAM,OAAY,MAAM,0GAAE,CACvB,MAAM,CAAC;YAAE,OAAO,mIAAG,CAAC,kBAAkB,EAAE,iHAAQ,CAAC,SAAS,CAAC,CAAC,CAAC;YAAE,OAAO,mIAAG,CAAC,aAAa,EAAE,iHAAQ,CAAC,MAAM,CAAC,IAAI,CAAC;QAAC,GAC/G,IAAI,CAAC,iHAAQ,EACb,OAAO,CAAC,mIAAG,CAAC,kBAAkB,EAAE,iHAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EACrD,GAAG;QAEN,iDAAiD;QACjD,MAAM,SAAmB,EAAE;QAC3B,MAAM,MAAM,IAAI;QAChB,IAAK,IAAI,IAAI,IAAI,KAAK,GAAG,IAAK;YAC5B,MAAM,IAAI,IAAI,KAAK,IAAI,WAAW,IAAI,IAAI,QAAQ,KAAK,GAAG;YAC1D,MAAM,KAAK,EAAE,WAAW,GAAG,KAAK,CAAC,GAAG,GAAG,UAAU;;YACjD,OAAO,IAAI,CAAC;QACd;QAEA,MAAM,MAA8B,CAAC;QACrC,KAAK,OAAO,CAAC,CAAC;YACZ,IAAI,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,EAAE,KAAK,CAAC,GAAG,OAAO,EAAE,KAAK,IAAI;QACrD;QAEA,MAAM,SAAS,OAAO,GAAG,CAAC,CAAA,IAAK,GAAG,CAAC,EAAE,IAAI;QAEzC,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE;YAAQ;QAAO;IAC/C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;YAAwC,SAAS,OAAO;QAAO;IACtG;AACF"}}]
}