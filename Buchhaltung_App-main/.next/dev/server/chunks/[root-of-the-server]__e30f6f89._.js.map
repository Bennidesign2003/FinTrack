{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/work/FinTrack/FinTrack/Buchhaltung_App-main/db/schema.ts"],"sourcesContent":["import { sqliteTable, text, real, integer, sqliteView } from 'drizzle-orm/sqlite-core'\nimport { sql } from 'drizzle-orm'\n\nexport const invoices = sqliteTable('invoices', {\n  id: integer('id').primaryKey({ autoIncrement: true }),\n  customer: text('customer').notNull(),\n  title: text('title').notNull().default(''),\n  amount: real('amount').notNull(),\n  taxRate: real('tax_rate').notNull().default(19),\n  taxAmount: real('tax_amount').notNull().default(0),\n  totalAmount: real('total_amount').notNull(),\n  dueDate: text('due_date'),\n  description: text('description'),\n  createdAt: text('created_at')\n    .default(sql`CURRENT_TIMESTAMP`)\n    .notNull(),\n  updatedAt: text('updated_at')\n    .default(sql`CURRENT_TIMESTAMP`)\n    .notNull(),\n  status: text('status').default('open').notNull() // 'open', 'paid', 'overdue'\n})\n\nexport const expenses = sqliteTable('expenses', {\n  id: integer('id').primaryKey({ autoIncrement: true }),\n  category: text('category').notNull(),\n  amount: real('amount').notNull(),\n  date: text('date'),\n  description: text('description'),\n  createdAt: text('created_at')\n    .default(sql`CURRENT_TIMESTAMP`)\n    .notNull()\n})\n\nexport const customers = sqliteTable('customers', {\n  id: integer('id').primaryKey({ autoIncrement: true }),\n  name: text('name').notNull().unique(),\n  email: text('email'),\n  phone: text('phone'),\n  address: text('address'),\n  city: text('city'),\n  postalCode: text('postal_code'),\n  country: text('country'),\n  taxId: text('tax_id'),\n  notes: text('notes'),\n  createdAt: text('created_at')\n    .default(sql`CURRENT_TIMESTAMP`)\n    .notNull(),\n  updatedAt: text('updated_at')\n    .default(sql`CURRENT_TIMESTAMP`)\n    .notNull()\n})\n\nexport const suppliers = sqliteTable('suppliers', {\n  id: integer('id').primaryKey({ autoIncrement: true }),\n  name: text('name').notNull().unique(),\n  email: text('email'),\n  phone: text('phone'),\n  address: text('address'),\n  city: text('city'),\n  postalCode: text('postal_code'),\n  country: text('country'),\n  taxId: text('tax_id'),\n  notes: text('notes'),\n  createdAt: text('created_at')\n    .default(sql`CURRENT_TIMESTAMP`)\n    .notNull(),\n  updatedAt: text('updated_at')\n    .default(sql`CURRENT_TIMESTAMP`)\n    .notNull()\n})\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;;;;;;AAEO,MAAM,WAAW,IAAA,+KAAW,EAAC,YAAY;IAC9C,IAAI,IAAA,2KAAO,EAAC,MAAM,UAAU,CAAC;QAAE,eAAe;IAAK;IACnD,UAAU,IAAA,wKAAI,EAAC,YAAY,OAAO;IAClC,OAAO,IAAA,wKAAI,EAAC,SAAS,OAAO,GAAG,OAAO,CAAC;IACvC,QAAQ,IAAA,wKAAI,EAAC,UAAU,OAAO;IAC9B,SAAS,IAAA,wKAAI,EAAC,YAAY,OAAO,GAAG,OAAO,CAAC;IAC5C,WAAW,IAAA,wKAAI,EAAC,cAAc,OAAO,GAAG,OAAO,CAAC;IAChD,aAAa,IAAA,wKAAI,EAAC,gBAAgB,OAAO;IACzC,SAAS,IAAA,wKAAI,EAAC;IACd,aAAa,IAAA,wKAAI,EAAC;IAClB,WAAW,IAAA,wKAAI,EAAC,cACb,OAAO,CAAC,mIAAG,CAAC,iBAAiB,CAAC,EAC9B,OAAO;IACV,WAAW,IAAA,wKAAI,EAAC,cACb,OAAO,CAAC,mIAAG,CAAC,iBAAiB,CAAC,EAC9B,OAAO;IACV,QAAQ,IAAA,wKAAI,EAAC,UAAU,OAAO,CAAC,QAAQ,OAAO,GAAG,4BAA4B;AAC/E;AAEO,MAAM,WAAW,IAAA,+KAAW,EAAC,YAAY;IAC9C,IAAI,IAAA,2KAAO,EAAC,MAAM,UAAU,CAAC;QAAE,eAAe;IAAK;IACnD,UAAU,IAAA,wKAAI,EAAC,YAAY,OAAO;IAClC,QAAQ,IAAA,wKAAI,EAAC,UAAU,OAAO;IAC9B,MAAM,IAAA,wKAAI,EAAC;IACX,aAAa,IAAA,wKAAI,EAAC;IAClB,WAAW,IAAA,wKAAI,EAAC,cACb,OAAO,CAAC,mIAAG,CAAC,iBAAiB,CAAC,EAC9B,OAAO;AACZ;AAEO,MAAM,YAAY,IAAA,+KAAW,EAAC,aAAa;IAChD,IAAI,IAAA,2KAAO,EAAC,MAAM,UAAU,CAAC;QAAE,eAAe;IAAK;IACnD,MAAM,IAAA,wKAAI,EAAC,QAAQ,OAAO,GAAG,MAAM;IACnC,OAAO,IAAA,wKAAI,EAAC;IACZ,OAAO,IAAA,wKAAI,EAAC;IACZ,SAAS,IAAA,wKAAI,EAAC;IACd,MAAM,IAAA,wKAAI,EAAC;IACX,YAAY,IAAA,wKAAI,EAAC;IACjB,SAAS,IAAA,wKAAI,EAAC;IACd,OAAO,IAAA,wKAAI,EAAC;IACZ,OAAO,IAAA,wKAAI,EAAC;IACZ,WAAW,IAAA,wKAAI,EAAC,cACb,OAAO,CAAC,mIAAG,CAAC,iBAAiB,CAAC,EAC9B,OAAO;IACV,WAAW,IAAA,wKAAI,EAAC,cACb,OAAO,CAAC,mIAAG,CAAC,iBAAiB,CAAC,EAC9B,OAAO;AACZ;AAEO,MAAM,YAAY,IAAA,+KAAW,EAAC,aAAa;IAChD,IAAI,IAAA,2KAAO,EAAC,MAAM,UAAU,CAAC;QAAE,eAAe;IAAK;IACnD,MAAM,IAAA,wKAAI,EAAC,QAAQ,OAAO,GAAG,MAAM;IACnC,OAAO,IAAA,wKAAI,EAAC;IACZ,OAAO,IAAA,wKAAI,EAAC;IACZ,SAAS,IAAA,wKAAI,EAAC;IACd,MAAM,IAAA,wKAAI,EAAC;IACX,YAAY,IAAA,wKAAI,EAAC;IACjB,SAAS,IAAA,wKAAI,EAAC;IACd,OAAO,IAAA,wKAAI,EAAC;IACZ,OAAO,IAAA,wKAAI,EAAC;IACZ,WAAW,IAAA,wKAAI,EAAC,cACb,OAAO,CAAC,mIAAG,CAAC,iBAAiB,CAAC,EAC9B,OAAO;IACV,WAAW,IAAA,wKAAI,EAAC,cACb,OAAO,CAAC,mIAAG,CAAC,iBAAiB,CAAC,EAC9B,OAAO;AACZ"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/work/FinTrack/FinTrack/Buchhaltung_App-main/db/index.ts"],"sourcesContent":["import Database from 'better-sqlite3'\nimport { drizzle } from 'drizzle-orm/better-sqlite3'\nimport * as schema from './schema'\n\nconst sqlite = new Database('buchhaltung.db')\nexport const db = drizzle(sqlite, { schema })\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;AAEA,MAAM,SAAS,IAAI,sIAAQ,CAAC;AACrB,MAAM,KAAK,IAAA,iLAAO,EAAC,QAAQ;IAAE,QAAA;AAAO"}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/work/FinTrack/FinTrack/Buchhaltung_App-main/pages/api/customers.ts"],"sourcesContent":["import type { NextApiRequest, NextApiResponse } from 'next'\nimport { db } from '@/db'\nimport { customers } from '@/db/schema'\nimport { eq } from 'drizzle-orm'\n\nexport default async function handler(req: NextApiRequest, res: NextApiResponse) {\n  if (req.method === 'POST') {\n    try {\n      const { name, email, phone, address, city, postalCode, country, taxId, notes } = req.body\n\n      if (!name) {\n        return res.status(400).json({ error: 'Name ist erforderlich' })\n      }\n\n      await db\n        .insert(customers)\n        .values({\n          name,\n          email: email || null,\n          phone: phone || null,\n          address: address || null,\n          city: city || null,\n          postalCode: postalCode || null,\n          country: country || 'DE',\n          taxId: taxId || null,\n          notes: notes || null\n        })\n        .run()\n\n      // fetch the created customer by name\n      const created = await db.select().from(customers).where(eq(customers.name, name)).all()\n\n      return res.status(201).json(created[0] || { name })\n    } catch (error: any) {\n      console.error('Error creating customer:', error)\n      if (error.message?.includes('UNIQUE')) {\n        return res.status(400).json({ error: 'Kundenname bereits vorhanden' })\n      }\n      return res.status(500).json({ error: 'Fehler beim Erstellen des Kunden', details: String(error) })\n    }\n  } else if (req.method === 'GET') {\n    try {\n      const allCustomers = await db.select().from(customers).all()\n      return res.status(200).json(allCustomers)\n    } catch (error) {\n      console.error('Error fetching customers:', error)\n      return res.status(500).json({ error: 'Fehler beim Abrufen der Kunden', details: String(error) })\n    }\n  } else if (req.method === 'PUT') {\n    try {\n      const { id, name, email, phone, address, city, postalCode, country, taxId, notes } = req.body\n\n      if (!id) {\n        return res.status(400).json({ error: 'ID ist erforderlich' })\n      }\n\n      if (!name) {\n        return res.status(400).json({ error: 'Name ist erforderlich' })\n      }\n\n      await db\n        .update(customers)\n        .set({\n          name,\n          email: email || null,\n          phone: phone || null,\n          address: address || null,\n          city: city || null,\n          postalCode: postalCode || null,\n          country: country || 'DE',\n          taxId: taxId || null,\n          notes: notes || null,\n          updatedAt: new Date().toISOString()\n        })\n        .where(eq(customers.id, Number(id)))\n        .run()\n\n      const updated = await db.select().from(customers).where(eq(customers.id, Number(id))).all()\n\n      return res.status(200).json(updated[0])\n    } catch (error: any) {\n      console.error('Error updating customer:', error)\n      if (error.message?.includes('UNIQUE')) {\n        return res.status(400).json({ error: 'Kundenname bereits vorhanden' })\n      }\n      return res.status(500).json({ error: 'Fehler beim Aktualisieren des Kunden', details: String(error) })\n    }\n  } else if (req.method === 'DELETE') {\n    try {\n      const { id } = req.query\n\n      if (!id || isNaN(Number(id))) {\n        return res.status(400).json({ error: 'Ungültige ID' })\n      }\n\n      await db.delete(customers).where(eq(customers.id, Number(id))).run()\n\n      return res.status(200).json({ message: 'Kunde gelöscht' })\n    } catch (error) {\n      console.error('Error deleting customer:', error)\n      return res.status(500).json({ error: 'Fehler beim Löschen des Kunden', details: String(error) })\n    }\n  } else {\n    return res.status(405).json({ error: 'Method not allowed' })\n  }\n}\n"],"names":[],"mappings":"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"}}]
}